<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145859009-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-145859009-1');
  </script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>BrainPainter - Visualisation of Brain Structures, Biomarkers and Associated Pathological Processes.</title>

  <!-- Bootstrap core CSS -->
  <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="/static/css/grayscale.css" rel="stylesheet">

  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

  <link href="/static/gallery.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#how">How it works</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#run">Run</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#gallery">Gallery</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#examples">Example Uses</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#advanced">Advanced Use & Videos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">About</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="masthead">
    <div class="container d-flex h-100 align-items-center">
      <div class="mx-auto text-center">
        <h1 class="mx-auto my-0">BrainPainter</h1>
        <h2 class="text-white-50 mx-auto mt-2 mb-5">A free software for visualisation of brain structures, biomarkers and associated pathological processes.</h2>
        <a href="#how" class="btn btn-primary js-scroll-trigger">How it works</a>
<!--         <br><br><a href="#run" class="btn btn-primary js-scroll-trigger">Get Started</a>-->
      </div>
    </div>
  </header>




  <!-- How it works Section -->
  <section id="how">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <br><br>
          <h2 class="text-black mb-4 text-center">How BrainPainter works</h2>
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>


    <br><br><img src="static/diagram_front_page.png"  style="width:100%" align="middle">

    <br><br><center><a href="#run" class="btn btn-primary js-scroll-trigger">Get Started</a></center><br><br>

    </div>
  </section>

  <script src="static/jscolor.js"></script>

  <!-- Customise Section -->
  <section id="run" class="projects-section bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-black mb-4 text-center">Run BrainPainter</h2>
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>




    <form method=post enctype=multipart/form-data action=generated>
     <div class="form-group row">
      <div class="col-3">
        <label for="exampleFormControlSelect1">Atlas</label>
        <select class="form-control" id="atlas" name="atlas">
          <option>Desikan-Killiany</option>
          <option>Destrieux</option>
          <option>Tourville</option>
        </select>

        <br><br>

        <label for="exampleFormControlSelect1">Brain Type</label>
        <select class="form-control" id="brainType" name="brainType">
          <option>pial</option>
          <option>inflated</option>
          <option>white</option>
        </select>


      </div>


      <div class="col-3">

        <label for="ex2">Colours (RGB)</label>
        <br>Fill-in at least the first two colours.
        <br><br>
<!--        <input class="form-control" id="c1" type="text" name="c1" placeholder="1,1,1 (biomarker value 0)" value="1,1,1">-->
        <input class="jscolor" id="c1" name="c1" value="FFFFFF">
        <span class="help-block">Colour corresponding to input biomarker value 0</span><br><br>

        <input class="jscolor" id="c2" name="c2" value="FFFF00">
        <span class="help-block">Colour corresponding to input biomarker value 1</span><br><br>

        <input class="jscolor" id="c3" name="c3" value="FF9100">
        <span class="help-block">Colour corresponding to input biomarker value 2</span><br><br>

        <input class="jscolor" id="c4" name="c4" value="FF0000">
        <span class="help-block">Colour corresponding to input biomarker value 3</span><br><br>

        <input class="jscolor" id="c5" name="c5" value="FF0000">
        <span class="help-block">Colour corresponding to input biomarker value 4</span><br><br>


      </div>
      <div class="col-2">
        <label for="ex3">Resolution</label>
        <input class="form-control" id="res" type="text" name="resolution" placeholder="1200,900" value="1200,900">
      </div>

      <div class="col-3">
        <label for="ex3">Background color (RGB)</label>
        <input class="jscolor" id="backgroundCol" name="backgroundCol" value="FFFFFF">
      </div>
    </div>

      <p>If more than two colours are desired for interpolation, make sure the input biomarker range is scaled to 0-5, to use up to the 5th colour for interpolation.</p><br><br>

    Upload input data file (.csv) according to these templates (max 20 different rows):
      <ul>
        <li><a href="static/DK_template.csv"> Desikan-Killiany template</a>:</li>
        <li><a href="static/Destrieux_template.csv"> Destrieux template</a>:</li>
        <li><a href="static/Tourville_template.csv"> Tourville template</a>:</li>
      </ul>

    <input type=file name=file>
    <input type=submit value="Generate" class="btn btn-primary js-scroll-trigger" >
  </form>
        <br>Processing usually takes around 15 seconds for each brain (set of 3 images). <b>Do not</b> refresh the page while processing takes place, otherwise you will need to re-run the generation. (Progress bar will be implemented soon)
        <br><br>

        Finally, if you need to process more than 20 images, either send it in batches or do it locally on your computer using the <a href="https://github.com/mrazvan22/brain-coloring">source code</a>. Please email me (razvan at csail.mit.edu) if you encounter any errors.
    </div>
  </section>



  <!-- Gallery Section -->
  <section id="gallery">
    <div class="container">
      <div class="row">
<!--        <a href="{{ url_for('.index', _anchor='gallery') }}">Anchor</a>-->
        <a name="gallery"></a>
        <div class="col-lg-8 mx-auto">
          <br><br>
          {% if galleryDisabled == 'disabled' %}
            <h2 class="text-black mb-4 ">Generated images (demo) - upload data to generate your own</h2>



          {% else %}
            <h2 class="text-black mb-4 ">Your generated images are ready to download!</h2>
            <p align="left">  Images were generated on:
            <script>
              var d = new Date();
              document.write(d.toLocaleString());
            </script><br>
            </p>
          {% endif %}
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>

      <!----------- Gallery code --------------->


      <!-- Images used to open the lightbox -->
      <div class="row">
        {% for i in range(figPaths|length): %}
          <div class="column">
            {{figDescsShort[i]}}
            <img src="{{figPaths[i]}}"  style="width:100%" onclick="openModal();currentSlide({{i+1}})" class="hover-shadow">
          </div>
        {% endfor %}
      </div>

      <!-- The Modal/Lightbox -->
      <div id="myModal" class="modal">
        <div class="modal-content">
        <span class="close cursor" onclick="closeModal()">&times;</span>
          {% for i in range(figPaths|length): %}
            <div class="mySlides">
              <div class="numbertext">{{i+1}} / {{figPaths|length}}</div>
              <img src="{{figPaths[i]}}" style="width:100%">
            </div>
          {% endfor %}

<!--          <div class="mySlides">-->
<!--            <div class="numbertext">2 / 2</div>-->
<!--            <img src="{{figPaths[1]}}" style="width:100%">-->
<!--          </div>-->

          <!-- Next/previous controls -->
          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
          <a class="next" onclick="plusSlides(1)">&#10095;</a>

          <!-- Caption text -->
          <div class="caption-container">
            <p id="caption"></p>
          </div>

          <!-- Thumbnail image controls -->
          <div class="rowModal">
            {% for i in range(figPaths|length): %}
              <div class="column">
                <img class="demo" src="{{figPaths[i]}}" style="width:100%" onclick="currentSlide(1)" alt="{{figDescs[i]}}">
              </div>
            {% endfor %}
          </div>
        </div>
      </div>


        <br><div class="container" align="left">
              <a href="{{zipLocation }}" target="blank"><button class="btn btn-primary js-scroll-trigger">Download!</button></a>
         </div>

      {% if galleryDisabled != 'disabled' %}
      <br><p align="left">Note: If the images are not good, change the settings and regenerate them. </p>
  <!-- End of Gallery code-->
      {% endif %}

<!--   <script>-->
<!--   var converter = new showdown.Converter(),-->
<!--    text      = '# hello, markdown!',-->
<!--    html      = converter.makeHtml(text);-->
<!--    document.write(html)-->
<!--   </script>-->


            <br><br><div align="left">
       <p  align="left">

  {% filter markdown %}

   If you find the BrainPainter useful, I would appreciate if you could cite it at the end of the figure caption, along these lines: *"Fig 1. ... Drawings generated using BrainPainter [ref]."*


    @article{marinescu2019brain,
      title={BrainPainter: A software for the visualisation of brain structures, biomarkers and associated pathological processes},
      author={Marinescu, Razvan and Eshaghi, Arman and Alexander, Daniel and Golland, Polina},
      journal={arXiv preprint arXiv:1905.08627},
      year={2019}
    }
  {% endfilter %}
       </p>
      </div>


    </div>
  </section>

  <!-- Example Uses Section -->
  <section id="examples"  class="projects-section bg-light text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-black mb-4">Example uses of BrainPainter</h2>
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>


     <div class="text-center" >
       <center>
{% filter markdown %}

Cortical - outer   | Cortical - inner   |  Subcortical
:-------------------------:|:------------------:|:-----------------:
![Cortical surface](static/outer_small.gif) | ![Cortical surface back](static/inner_small.gif)   |  ![Subcortical structures](static/subcortical_small.gif)
&nbsp;

*Animation created using BrainPainter, by [Garbarino and Lorenzi, IPMI, 2019](https://arxiv.org/pdf/1901.10545.pdf) *

{% endfilter %}<br><br><br>
         </center>

        <img src="static/young_sustain.png"  style="width:60%" align="middle"><br><br>
       Brain images used by <a href="https://www.nature.com/articles/s41467-018-05892-0">Young et al., Nature Comms., 2018<a/><br><br><br>

        <img src="static/peter_subcortical.jpg"  style="width:60%"><br><br>
       Subcortical regions used by <a href="https://onlinelibrary.wiley.com/doi/full/10.1002/acn3.558">Wijeratne et al, Ann. Clin. Neurol., 2018</a>.<br><br><br>


     </div>

    </div>
  </section>




  <!-- Advanced use Section -->
  <section id="advanced">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <br><br>
          <h2 class="text-black mb-4 text-center">Advanced Use</h2>
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>

    <p>For more customisation, please run straight from the <a href="https://github.com/mrazvan22/brain-coloring">source code</a>. No installation is required, as the program is already bundled within a docker container. The following aspects can be customise there:
      <ul>
          <li class="nav-item">
            the atlas: any custom atlas can be used by mapping its regions to the regions of one of the three pre-defined atlases (DK, Destrieux, Tourville)
          </li>
          <li class="nav-item">
            lightning conditions/ camera viewpoint: can be done within the python source code.
          </li>

        </ul>

      <h2 class="text-black mb-4 text-center">Videos</h2>

      For generating videos showing e.g. progression of pathology, you need to generate many images (25/sec), where each image is a new row in the input .csv spreadsheet. For example, to generate a 4-second video, you need 100 rows. The numbers you fill in need to change smoothly. After generating the images, you can find programs online/linux commandsto merge the frames into an animated gif.

      <br><br>

      Finally, please send images in batches of max. 20, as this will otherwise congest our server and the program will also time out. For generating many images (>100), consider running the software on your local machine from the docker container.

      <h2 class="text-black mb-4 text-center">Source code</h2>

      The source code for the BrainPainter software can be found <a href="https://github.com/mrazvan22/brain-coloring">here</a>, while the source code for this website, written in flask, is available <a href="https://github.com/mrazvan22/brain-coloring-website">here</a>.

    </p>

    <br><br>


    </div>
  </section>



 <!-- Advanced use Section -->
  <section id="about" class="projects-section bg-light ">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <br><br>
          <h2 class="text-black mb-4 text-center">About BrainPainter</h2>
<!--          <p class="text-white-50">Customise the type of brain images, atlases, resolution, and many more:</p>-->
        </div>
      </div>

    <p>BrainPainter is a free and open source software published under the CC-BY-SA software license. Our paper, which can be found here <a href="https://arxiv.org/abs/1905.08627">here</a>, was accepted for an oral presentation at the MICCAI 2019 <a href="http://crystal.uta.edu/~mbia/">MBIA workshop</a> in Shenzhen, China.</p>

    <p>Funding for BrainPainter was provided by the NIH grants NIBIB NAC P41EB015902 and NINDS R01NS086905, as well as the EPSRC Centre For Doctoral Training in Medical Imaging with grant EP/L016478/1. We are also particularly grateful to Anderson Winkler for creating the <a href="https://brainder.org/research/brain-for-blender/">3D brain models</a> for all three atlases, which are used by the software. </p>

    <br><br>

      If you experience any issues, please email me (razvan [at] csail.mit.edu) or raise an issue on the <a href="https://github.com/mrazvan22/brain-coloring">github page</a>.

    </div>
  </section>

<!--  &lt;!&ndash; Signup Section &ndash;&gt;-->
<!--  <section id="signup" class="signup-section">-->
<!--    <div class="container">-->
<!--      <div class="row">-->
<!--        <div class="col-md-10 col-lg-8 mx-auto text-center">-->

<!--          <i class="far fa-paper-plane fa-2x mb-2 text-white"></i>-->
<!--          <h2 class="text-white mb-5">Subscribe to receive updates!</h2>-->

<!--          <form class="form-inline d-flex">-->
<!--            <input type="email" class="form-control flex-fill mr-0 mr-sm-2 mb-3 mb-sm-0" id="inputEmail" placeholder="Enter email address...">-->
<!--            <button type="submit" class="btn btn-primary mx-auto">Subscribe</button>-->
<!--          </form>-->

<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </section>-->

  <!-- Contact Section -->
  <section class="contact-section bg-black">
    <div class="container">

<!--      <div class="row">-->

<!--        <div class="col-md-4 mb-3 mb-md-0">-->
<!--          <div class="card py-4 h-100">-->
<!--            <div class="card-body text-center">-->
<!--              <i class="fas fa-map-marked-alt text-primary mb-2"></i>-->
<!--              <h4 class="text-uppercase m-0">Address</h4>-->
<!--              <hr class="my-4">-->
<!--              <div class="small text-black-50">4923 Market Street, Orlando FL</div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="col-md-4 mb-3 mb-md-0">-->
<!--          <div class="card py-4 h-100">-->
<!--            <div class="card-body text-center">-->
<!--              <i class="fas fa-envelope text-primary mb-2"></i>-->
<!--              <h4 class="text-uppercase m-0">Email</h4>-->
<!--              <hr class="my-4">-->
<!--              <div class="small text-black-50">-->
<!--                <a href="#">hello@yourdomain.com</a>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="col-md-4 mb-3 mb-md-0">-->
<!--          <div class="card py-4 h-100">-->
<!--            <div class="card-body text-center">-->
<!--              <i class="fas fa-mobile-alt text-primary mb-2"></i>-->
<!--              <h4 class="text-uppercase m-0">Phone</h4>-->
<!--              <hr class="my-4">-->
<!--              <div class="small text-black-50">+1 (555) 902-8832</div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

      <div class="social d-flex justify-content-center">
        <a href="https://twitter.com/RazMarinescu" class="mx-2">
          <i class="fab fa-twitter"></i>
        </a>
<!--        <a href="#" class="mx-2">-->
<!--          <i class="fab fa-facebook-f">https://www.facebook.com/mrazvan22</i>-->
<!--        </a>-->
        <a href="https://github.com/mrazvan22/brain-coloring" class="mx-2">
          <i class="fab fa-github"></i>
        </a>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black small text-center text-white-50">
    <div class="container">
      Copyright &copy; Razvan Marinescu<br>
      BrainPainter is free and open source software licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons BY-SA license</a> .
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="/static/vendor/jquery/jquery.min.js"></script>
  <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="/static/js/grayscale.min.js"></script>

  <script>$(document).ready(function(){
    var next = 1;
    $(".add-more").click(function(e){
        e.preventDefault();
        var addto = "#field" + next;
        var addRemove = "#field" + (next);
        next = next + 1;
        var newIn = '<input autocomplete="off" class="input form-control" id="field' + next + '" name="field' + next + '" type="text">';
        var newInput = $(newIn);
        var removeBtn = '<button id="remove' + (next - 1) + '" class="btn btn-danger remove-me" >-</button></div><div id="field">';
        var removeButton = $(removeBtn);
        $(addto).after(newInput);
        $(addRemove).after(removeButton);
        $("#field" + next).attr('data-source',$(addto).attr('data-source'));
        $("#count").val(next);

            $('.remove-me').click(function(e){
                e.preventDefault();
                var fieldNum = this.id.charAt(this.id.length-1);
                var fieldID = "#field" + fieldNum;
                $(this).remove();
                $(fieldID).remove();
            });
    });



});
</script>

      <script>
      function openModal() {
        document.getElementById("myModal").style.display = "block";
      }

      function closeModal() {
        document.getElementById("myModal").style.display = "none";
      }

      var slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides(slideIndex += n);
      }

      function currentSlide(n) {
        showSlides(slideIndex = n);
      }

      function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("demo");
        var captionText = document.getElementById("caption");
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
        captionText.innerHTML = dots[slideIndex-1].alt;
      }
      $(document).mouseup(function(e){
            if($(e.target).parents('.modal-content').length==0 && !$(e.target).is('.modal-content')){
                $('.modal').css('display', 'none');
            }
        });
      </script>



      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

      {% if galleryDisabled != 'disabled' %}
        <script> window.location.hash="gallery"; </script>
      {% endif %}

    <script>// For todays date;
Date.prototype.today = function () {
    return ((this.getDate() < 10)?"0":"") + this.getDate() +"/"+(((this.getMonth()+1) < 10)?"0":"") + (this.getMonth()+1) +"/"+ this.getFullYear();
}

// For the time now
Date.prototype.timeNow = function () {
     return ((this.getHours() < 10)?"0":"") + this.getHours() +":"+ ((this.getMinutes() < 10)?"0":"") + this.getMinutes() +":"+ ((this.getSeconds() < 10)?"0":"") + this.getSeconds();
}</script>

<!--<script src="https://cdn.rawgit.com/showdownjs/showdown/1.0.1/dist/showdown.min.js"></script>-->



</body>

</html>
